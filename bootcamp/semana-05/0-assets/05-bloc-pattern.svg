<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 550">
  <defs>
    <linearGradient id="blocGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#64B5F6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#1565C0;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="eventGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#FFB74D;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#F57C00;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="stateGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#81C784;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#388E3C;stop-opacity:1" />
    </linearGradient>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#FFB74D"/>
    </marker>
    <marker id="arrowGreen" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#81C784"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="800" height="550" fill="#1E1E1E"/>
  
  <!-- Title -->
  <text x="400" y="35" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="#FFFFFF" text-anchor="middle">
    5. Patrón BLoC (Business Logic Component)
  </text>
  <text x="400" y="58" font-family="Arial, sans-serif" font-size="14" fill="#B0B0B0" text-anchor="middle">
    Separación de UI y lógica de negocio con streams
  </text>
  
  <!-- UI Layer -->
  <rect x="50" y="90" width="180" height="180" rx="12" fill="#2D2D2D" stroke="#CE93D8" stroke-width="2"/>
  <text x="140" y="115" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#CE93D8" text-anchor="middle">UI Layer</text>
  
  <rect x="70" y="130" width="140" height="35" rx="6" fill="#1E1E1E"/>
  <text x="140" y="152" font-family="monospace" font-size="11" fill="#FFFFFF" text-anchor="middle">CartScreen</text>
  
  <rect x="70" y="175" width="140" height="35" rx="6" fill="#1E1E1E"/>
  <text x="140" y="197" font-family="monospace" font-size="11" fill="#FFFFFF" text-anchor="middle">ProductCard</text>
  
  <rect x="70" y="220" width="140" height="35" rx="6" fill="#1E1E1E"/>
  <text x="140" y="242" font-family="monospace" font-size="11" fill="#FFFFFF" text-anchor="middle">CartBadge</text>
  
  <!-- BLoC Layer -->
  <rect x="310" y="90" width="180" height="180" rx="12" fill="url(#blocGrad)"/>
  <text x="400" y="115" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#FFFFFF" text-anchor="middle">BLoC / Cubit</text>
  
  <rect x="330" y="135" width="140" height="50" rx="6" fill="#1E1E1E"/>
  <text x="400" y="155" font-family="monospace" font-size="11" fill="#64B5F6" text-anchor="middle">CartCubit</text>
  <text x="400" y="175" font-family="monospace" font-size="9" fill="#B0B0B0" text-anchor="middle">extends Cubit&lt;CartState&gt;</text>
  
  <rect x="330" y="195" width="140" height="60" rx="6" fill="#1E1E1E"/>
  <text x="400" y="215" font-family="monospace" font-size="10" fill="#81C784" text-anchor="middle">addItem()</text>
  <text x="400" y="232" font-family="monospace" font-size="10" fill="#81C784" text-anchor="middle">removeItem()</text>
  <text x="400" y="249" font-family="monospace" font-size="10" fill="#81C784" text-anchor="middle">clearCart()</text>
  
  <!-- Data Layer -->
  <rect x="570" y="90" width="180" height="180" rx="12" fill="#2D2D2D" stroke="#FFB74D" stroke-width="2"/>
  <text x="660" y="115" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#FFB74D" text-anchor="middle">Data Layer</text>
  
  <rect x="590" y="135" width="140" height="35" rx="6" fill="#1E1E1E"/>
  <text x="660" y="157" font-family="monospace" font-size="11" fill="#FFFFFF" text-anchor="middle">CartRepository</text>
  
  <rect x="590" y="180" width="140" height="35" rx="6" fill="#1E1E1E"/>
  <text x="660" y="202" font-family="monospace" font-size="11" fill="#FFFFFF" text-anchor="middle">ApiService</text>
  
  <rect x="590" y="225" width="140" height="35" rx="6" fill="#1E1E1E"/>
  <text x="660" y="247" font-family="monospace" font-size="11" fill="#FFFFFF" text-anchor="middle">LocalStorage</text>
  
  <!-- Event Arrow -->
  <rect x="165" y="300" width="100" height="30" rx="6" fill="url(#eventGrad)"/>
  <text x="215" y="320" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#FFFFFF" text-anchor="middle">Event</text>
  <line x1="230" y1="180" x2="305" y2="180" stroke="#FFB74D" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="267" y="170" font-family="monospace" font-size="9" fill="#FFB74D">addItem()</text>
  
  <!-- State Arrow -->
  <rect x="165" y="340" width="100" height="30" rx="6" fill="url(#stateGrad)"/>
  <text x="215" y="360" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#FFFFFF" text-anchor="middle">State</text>
  <line x1="310" y1="200" x2="235" y2="200" stroke="#81C784" stroke-width="2" marker-end="url(#arrowGreen)"/>
  <text x="267" y="215" font-family="monospace" font-size="9" fill="#81C784">CartState</text>
  
  <!-- Cubit Code Example -->
  <rect x="50" y="400" width="340" height="130" rx="8" fill="#2D2D2D" stroke="#64B5F6" stroke-width="1"/>
  <text x="220" y="425" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#64B5F6" text-anchor="middle">Cubit (Simplificado)</text>
  
  <text x="70" y="450" font-family="monospace" font-size="10" fill="#CE93D8">class</text>
  <text x="105" y="450" font-family="monospace" font-size="10" fill="#64B5F6"> CartCubit</text>
  <text x="175" y="450" font-family="monospace" font-size="10" fill="#CE93D8"> extends</text>
  <text x="225" y="450" font-family="monospace" font-size="10" fill="#64B5F6"> Cubit</text>
  <text x="260" y="450" font-family="monospace" font-size="10" fill="#FFFFFF">&lt;</text>
  <text x="267" y="450" font-family="monospace" font-size="10" fill="#81C784">CartState</text>
  <text x="327" y="450" font-family="monospace" font-size="10" fill="#FFFFFF">&gt; {</text>
  
  <text x="80" y="475" font-family="monospace" font-size="10" fill="#81C784">void</text>
  <text x="110" y="475" font-family="monospace" font-size="10" fill="#FFB74D"> addItem</text>
  <text x="170" y="475" font-family="monospace" font-size="10" fill="#FFFFFF">(Item item) {</text>
  
  <text x="90" y="495" font-family="monospace" font-size="10" fill="#FFB74D">emit</text>
  <text x="115" y="495" font-family="monospace" font-size="10" fill="#FFFFFF">(state.copyWith(</text>
  
  <text x="100" y="510" font-family="monospace" font-size="10" fill="#FFFFFF">items: [...state.items, item]</text>
  
  <text x="90" y="525" font-family="monospace" font-size="10" fill="#FFFFFF">));</text>
  
  <!-- BlocBuilder Example -->
  <rect x="410" y="400" width="340" height="130" rx="8" fill="#2D2D2D" stroke="#CE93D8" stroke-width="1"/>
  <text x="580" y="425" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#CE93D8" text-anchor="middle">BlocBuilder (UI)</text>
  
  <text x="430" y="450" font-family="monospace" font-size="10" fill="#64B5F6">BlocBuilder</text>
  <text x="507" y="450" font-family="monospace" font-size="10" fill="#FFFFFF">&lt;</text>
  <text x="514" y="450" font-family="monospace" font-size="10" fill="#64B5F6">CartCubit</text>
  <text x="577" y="450" font-family="monospace" font-size="10" fill="#FFFFFF">,</text>
  <text x="585" y="450" font-family="monospace" font-size="10" fill="#81C784">CartState</text>
  <text x="647" y="450" font-family="monospace" font-size="10" fill="#FFFFFF">&gt;(</text>
  
  <text x="440" y="475" font-family="monospace" font-size="10" fill="#FFB74D">builder:</text>
  <text x="495" y="475" font-family="monospace" font-size="10" fill="#FFFFFF"> (context, state) {</text>
  
  <text x="450" y="495" font-family="monospace" font-size="10" fill="#CE93D8">return</text>
  <text x="495" y="495" font-family="monospace" font-size="10" fill="#64B5F6"> ListView</text>
  <text x="555" y="495" font-family="monospace" font-size="10" fill="#FFFFFF">(</text>
  
  <text x="460" y="515" font-family="monospace" font-size="10" fill="#FFB74D">children:</text>
  <text x="520" y="515" font-family="monospace" font-size="10" fill="#FFFFFF"> state.items.map(...)</text>
  
  <text x="450" y="530" font-family="monospace" font-size="10" fill="#FFFFFF">);</text>
  
  <!-- Footer -->
  <text x="400" y="545" font-family="Arial, sans-serif" font-size="11" fill="#B0B0B0" text-anchor="middle">
    Cubit = BLoC sin eventos, solo métodos directos | emit() = notifyListeners() equivalente
  </text>
</svg>