<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 500">
  <!-- Fondo -->
  <rect width="800" height="500" fill="#1E1E1E"/>
  
  <!-- TÃ­tulo -->
  <text x="400" y="35" font-family="Segoe UI, sans-serif" font-size="22" font-weight="bold" fill="#FFFFFF" text-anchor="middle">PatrÃ³n de SincronizaciÃ³n Offline-First</text>
  
  <!-- Cloud Server -->
  <ellipse cx="650" cy="100" rx="80" ry="40" fill="#424242" stroke="#64B5F6" stroke-width="2"/>
  <text x="650" y="95" font-family="Segoe UI, sans-serif" font-size="14" font-weight="bold" fill="#64B5F6" text-anchor="middle">â˜ï¸ Server</text>
  <text x="650" y="115" font-family="Arial, sans-serif" font-size="10" fill="#9E9E9E" text-anchor="middle">Remote API</text>
  
  <!-- Mobile Device -->
  <rect x="80" y="60" width="120" height="200" rx="12" fill="#2D2D2D" stroke="#81C784" stroke-width="2"/>
  <rect x="90" y="75" width="100" height="150" rx="4" fill="#424242"/>
  <ellipse cx="140" cy="245" rx="15" ry="8" fill="#81C784"/>
  <text x="140" y="120" font-family="Segoe UI, sans-serif" font-size="12" font-weight="bold" fill="#81C784" text-anchor="middle">ğŸ“± App</text>
  <text x="140" y="140" font-family="Arial, sans-serif" font-size="9" fill="#9E9E9E" text-anchor="middle">Flutter</text>
  
  <!-- Local Database inside device -->
  <rect x="95" y="155" width="90" height="60" rx="4" fill="#2D4A3E" stroke="#81C784" stroke-width="1"/>
  <text x="140" y="175" font-family="Segoe UI, sans-serif" font-size="10" font-weight="bold" fill="#81C784" text-anchor="middle">Local DB</text>
  <text x="140" y="190" font-family="Arial, sans-serif" font-size="8" fill="#9E9E9E" text-anchor="middle">SQLite/Hive</text>
  <text x="140" y="205" font-family="Arial, sans-serif" font-size="8" fill="#9E9E9E" text-anchor="middle">+ Pending Queue</text>
  
  <!-- Sync Service -->
  <rect x="280" y="80" width="150" height="80" rx="8" fill="#424242" stroke="#FFB74D" stroke-width="2"/>
  <text x="355" y="105" font-family="Segoe UI, sans-serif" font-size="12" font-weight="bold" fill="#FFB74D" text-anchor="middle">ğŸ”„ Sync Service</text>
  <text x="355" y="125" font-family="Arial, sans-serif" font-size="9" fill="#9E9E9E" text-anchor="middle">Check connectivity</text>
  <text x="355" y="140" font-family="Arial, sans-serif" font-size="9" fill="#9E9E9E" text-anchor="middle">Manage queue</text>
  <text x="355" y="155" font-family="Arial, sans-serif" font-size="9" fill="#9E9E9E" text-anchor="middle">Handle conflicts</text>
  
  <!-- Arrows App to Sync -->
  <path d="M200 120 L275 120" stroke="#81C784" stroke-width="2" fill="none" marker-end="url(#arrowSync)"/>
  <text x="237" y="112" font-family="Arial, sans-serif" font-size="8" fill="#81C784">Read/Write</text>
  
  <!-- Arrows Sync to Server -->
  <path d="M430 100 L565 100" stroke="#64B5F6" stroke-width="2" fill="none" marker-end="url(#arrowSync)"/>
  <text x="490" y="92" font-family="Arial, sans-serif" font-size="8" fill="#64B5F6">When Online</text>
  
  <!-- Divider -->
  <line x1="50" y1="290" x2="750" y2="290" stroke="#424242" stroke-width="1" stroke-dasharray="5"/>
  <text x="400" y="285" font-family="Arial, sans-serif" font-size="10" fill="#616161" text-anchor="middle">Sync Flow States</text>
  
  <!-- State 1: Online -->
  <rect x="50" y="310" width="160" height="90" rx="8" fill="#2D4A3E" stroke="#81C784" stroke-width="2"/>
  <text x="130" y="335" font-family="Segoe UI, sans-serif" font-size="12" font-weight="bold" fill="#81C784" text-anchor="middle">âœ… ONLINE</text>
  <text x="130" y="355" font-family="Arial, sans-serif" font-size="9" fill="#9E9E9E" text-anchor="middle">1. Save to local DB</text>
  <text x="130" y="370" font-family="Arial, sans-serif" font-size="9" fill="#9E9E9E" text-anchor="middle">2. Sync to server</text>
  <text x="130" y="385" font-family="Arial, sans-serif" font-size="9" fill="#9E9E9E" text-anchor="middle">3. Update sync status</text>
  
  <!-- State 2: Offline -->
  <rect x="240" y="310" width="160" height="90" rx="8" fill="#4A3D2D" stroke="#FFB74D" stroke-width="2"/>
  <text x="320" y="335" font-family="Segoe UI, sans-serif" font-size="12" font-weight="bold" fill="#FFB74D" text-anchor="middle">ğŸ“´ OFFLINE</text>
  <text x="320" y="355" font-family="Arial, sans-serif" font-size="9" fill="#9E9E9E" text-anchor="middle">1. Save to local DB</text>
  <text x="320" y="370" font-family="Arial, sans-serif" font-size="9" fill="#9E9E9E" text-anchor="middle">2. Add to pending queue</text>
  <text x="320" y="385" font-family="Arial, sans-serif" font-size="9" fill="#9E9E9E" text-anchor="middle">3. Mark as "pending"</text>
  
  <!-- State 3: Reconnect -->
  <rect x="430" y="310" width="160" height="90" rx="8" fill="#2D4A5A" stroke="#64B5F6" stroke-width="2"/>
  <text x="510" y="335" font-family="Segoe UI, sans-serif" font-size="12" font-weight="bold" fill="#64B5F6" text-anchor="middle">ğŸ”„ RECONNECT</text>
  <text x="510" y="355" font-family="Arial, sans-serif" font-size="9" fill="#9E9E9E" text-anchor="middle">1. Process queue</text>
  <text x="510" y="370" font-family="Arial, sans-serif" font-size="9" fill="#9E9E9E" text-anchor="middle">2. Sync pending items</text>
  <text x="510" y="385" font-family="Arial, sans-serif" font-size="9" fill="#9E9E9E" text-anchor="middle">3. Resolve conflicts</text>
  
  <!-- State 4: Conflict -->
  <rect x="620" y="310" width="160" height="90" rx="8" fill="#4A2D2D" stroke="#EF5350" stroke-width="2"/>
  <text x="700" y="335" font-family="Segoe UI, sans-serif" font-size="12" font-weight="bold" fill="#EF5350" text-anchor="middle">âš ï¸ CONFLICT</text>
  <text x="700" y="355" font-family="Arial, sans-serif" font-size="9" fill="#9E9E9E" text-anchor="middle">â€¢ Last-write-wins</text>
  <text x="700" y="370" font-family="Arial, sans-serif" font-size="9" fill="#9E9E9E" text-anchor="middle">â€¢ Merge changes</text>
  <text x="700" y="385" font-family="Arial, sans-serif" font-size="9" fill="#9E9E9E" text-anchor="middle">â€¢ User resolution</text>
  
  <!-- Arrows between states -->
  <path d="M210 355 L235 355" stroke="#9E9E9E" stroke-width="1" fill="none" marker-end="url(#arrowSyncSmall)"/>
  <path d="M400 355 L425 355" stroke="#9E9E9E" stroke-width="1" fill="none" marker-end="url(#arrowSyncSmall)"/>
  <path d="M590 355 L615 355" stroke="#9E9E9E" stroke-width="1" fill="none" marker-end="url(#arrowSyncSmall)"/>
  
  <!-- Queue visualization -->
  <rect x="280" y="190" width="150" height="70" rx="6" fill="#2D2D2D" stroke="#616161" stroke-width="1"/>
  <text x="355" y="210" font-family="Segoe UI, sans-serif" font-size="10" font-weight="bold" fill="#9E9E9E" text-anchor="middle">Pending Queue</text>
  <rect x="290" y="220" width="30" height="20" rx="2" fill="#FFB74D"/>
  <rect x="325" y="220" width="30" height="20" rx="2" fill="#FFB74D"/>
  <rect x="360" y="220" width="30" height="20" rx="2" fill="#FFB74D"/>
  <rect x="395" y="220" width="30" height="20" rx="2" fill="#424242" stroke="#616161" stroke-dasharray="2"/>
  <text x="305" y="234" font-family="Arial, sans-serif" font-size="8" fill="#1E1E1E" text-anchor="middle">1</text>
  <text x="340" y="234" font-family="Arial, sans-serif" font-size="8" fill="#1E1E1E" text-anchor="middle">2</text>
  <text x="375" y="234" font-family="Arial, sans-serif" font-size="8" fill="#1E1E1E" text-anchor="middle">3</text>
  <text x="410" y="234" font-family="Arial, sans-serif" font-size="8" fill="#616161" text-anchor="middle">...</text>
  <text x="355" y="255" font-family="Arial, sans-serif" font-size="8" fill="#616161" text-anchor="middle">FIFO processing</text>
  
  <!-- Footer -->
  <rect x="50" y="420" width="700" height="50" rx="8" fill="#2D2D2D" stroke="#616161" stroke-width="1"/>
  <text x="400" y="440" font-family="Segoe UI, sans-serif" font-size="11" font-weight="bold" fill="#FFFFFF" text-anchor="middle">ğŸ’¡ Beneficios: UX fluido | Sin pÃ©rdida de datos | Funciona sin red | SincronizaciÃ³n automÃ¡tica</text>
  <text x="400" y="458" font-family="Arial, sans-serif" font-size="9" fill="#9E9E9E" text-anchor="middle">Paquetes: connectivity_plus, workmanager, background_fetch</text>
  
  <!-- Marker definitions -->
  <defs>
    <marker id="arrowSync" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#9E9E9E"/>
    </marker>
    <marker id="arrowSyncSmall" markerWidth="8" markerHeight="8" refX="7" refY="2.5" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,5 L7,2.5 z" fill="#9E9E9E"/>
    </marker>
  </defs>
</svg>
